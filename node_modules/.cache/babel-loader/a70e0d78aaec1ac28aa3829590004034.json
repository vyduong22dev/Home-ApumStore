{"ast":null,"code":"import _objectSpread from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/vyduong/Desktop/client/Home-ApumStore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{compose}from'redux';import{withTranslation}from'react-i18next';import qs from\"query-string\";// @Actions\nimport ProductsActions from'../../redux/actions/products';import CategoryActions from'../../redux/actions/categories';// @Functions\nimport getFilterParams from\"../../utils/getFilterParams\";// @Components\nimport ProductItem from\"../../containers/ProductItem\";import Pagination from\"react-js-pagination\";var SearchPage=/*#__PURE__*/function(_Component){_inherits(SearchPage,_Component);var _super=_createSuper(SearchPage);function SearchPage(props){var _this;_classCallCheck(this,SearchPage);_this=_super.call(this,props);_this.handleUpdateFilter=function(data){var _this$props=_this.props,location=_this$props.location,history=_this$props.history;var pathname=location.pathname,search=location.search;var queryParams=getFilterParams(search);queryParams=_objectSpread(_objectSpread({},queryParams),data);history.push(\"\".concat(pathname,\"?\").concat(qs.stringify(queryParams)));};_this.handleChangeSortPrice=function(event){_this.handleUpdateFilter({sort_p:event.target.value,page:0});};_this.onSetCategory=function(value){_this.handleUpdateFilter({category:value,page:0});};var _location=props.location;var filter=getFilterParams(_location.search);_this.state={keyword:filter.keyword===null?\"\":filter.keyword,filter:{limit:12,page:0}};return _this;}_createClass(SearchPage,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this$props2=this.props,location=_this$props2.location,onGetList=_this$props2.onGetList,onGetListCategory=_this$props2.onGetListCategory;if(prevProps.location.search!==location.search){var filters=getFilterParams(location.search);var filter=this.state.filter;var params=_objectSpread(_objectSpread({},filter),filters);onGetList(params);onGetListCategory(params);}}},{key:\"handlePageChange\",value:// phân trang\nfunction handlePageChange(pageNumber){this.handleUpdateFilter({page:pageNumber-1});}},{key:\"UNSAFE_componentWillMount\",value:function UNSAFE_componentWillMount(){var _this$props3=this.props,onGetList=_this$props3.onGetList,location=_this$props3.location,onGetListCategory=_this$props3.onGetListCategory;var _this$state=this.state,filter=_this$state.filter,keyword=_this$state.keyword;document.title=\"K\\u1EBFt qu\\u1EA3 t\\xECm ki\\u1EBFm '\".concat(keyword,\"'\");var filters=getFilterParams(location.search);var params=_objectSpread(_objectSpread({},filter),filters);onGetList(params);onGetListCategory(params);}},{key:\"render\",value:function render(){var _this2=this;var _this$props4=this.props,location=_this$props4.location,listProducts=_this$props4.listProducts,total=_this$props4.total,listCategory=_this$props4.listCategory,t=_this$props4.t;var filter=getFilterParams(location.search);return/*#__PURE__*/React.createElement(\"div\",{className:\"single-product-area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container my-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 my-2\"},/*#__PURE__*/React.createElement(\"a\",{className:\"text-decoration-none directory rounded p-2\",href:\"/#/\"},t('header.home.menu')),/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-chevron-right px-2 w-25-px\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"font-weight-bold\"},t(\"search.label\")))),total>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"border-bottom pb-2\"},t('search.result.title'),\" '\",filter.keyword,\"'\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:filter.category===null||filter.category===undefined?\"rounded-pill shadow-sm bg-info text-dark my-2 mr-2 position-relative btn-padding\":\"rounded-pill shadow-sm bg-active text-dark my-2 mr-2 position-relative btn-padding\",onClick:function onClick(){return _this2.onSetCategory(null);}},t('common.all')),listCategory&&listCategory.map(function(category,index){return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:filter.category===category.id.id?\"rounded-pill shadow-sm bg-info text-dark mr-2 my-2 position-relative btn-padding\":\"rounded-pill shadow-sm bg-active text-dark mr-2 my-2 position-relative btn-padding\",key:index,onClick:function onClick(){return _this2.onSetCategory(category.id.id);}},category.id.name,/*#__PURE__*/React.createElement(\"span\",{className:\"product-count\"},category.count));})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"p\",null,t('shop.search.first'),\" \",total,\" \",t('shop.search.last'))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"select\",{value:filter.sort_p,className:\"form-select float-end w-fit-content\",onChange:this.handleChangeSortPrice},/*#__PURE__*/React.createElement(\"option\",{key:-1,value:\"0\"},t('shop.sort.price')),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},t('shop.sort.inc')),/*#__PURE__*/React.createElement(\"option\",{value:\"-1\"},t('shop.sort.des')))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},listProducts&&listProducts.map(function(product,index){return/*#__PURE__*/React.createElement(ProductItem,{product:product,key:index});})))),total===0&&/*#__PURE__*/React.createElement(\"div\",{className:\"row my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-center my-5 py-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"h-120\"},/*#__PURE__*/React.createElement(\"img\",{className:\"h-100\",src:\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/a60759ad1dabe909c46a817ecbf71878.png\",alt:\"404 not found\"})),/*#__PURE__*/React.createElement(\"h3\",null,t('search.not-yet.h3'))))),total>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-pagination text-center\"},/*#__PURE__*/React.createElement(\"nav\",{className:\"float-end\"},/*#__PURE__*/React.createElement(Pagination,{activePage:filter.page?parseInt(filter.page)+1:1,itemsCountPerPage:4,totalItemsCount:total?total:10,pageRangeDisplayed:3,linkClass:\"page-link\",itemClass:\"page-item\",prevPageText:t('shop.pagination.prev'),nextPageText:t('shop.pagination.next'),hideFirstLastPages:true,onChange:this.handlePageChange.bind(this)})))))));}}]);return SearchPage;}(Component);var mapStateToProps=function mapStateToProps(state){return{listProducts:state.products.list,listCategory:state.categories.search,total:state.products.total};};var mapDispatchToProps=function mapDispatchToProps(dispatch,props){return{onGetList:function onGetList(params){dispatch(ProductsActions.onGetList(params));},onGetListCategory:function onGetListCategory(params){dispatch(CategoryActions.onGetListKeyword(params));}};};var withConnect=connect(mapStateToProps,mapDispatchToProps);export default compose(withConnect,withTranslation())(SearchPage);","map":{"version":3,"sources":["/Users/vyduong/Desktop/client/Home-ApumStore/src/components/SearchPage/index.js"],"names":["React","Component","connect","compose","withTranslation","qs","ProductsActions","CategoryActions","getFilterParams","ProductItem","Pagination","SearchPage","props","handleUpdateFilter","data","location","history","pathname","search","queryParams","push","stringify","handleChangeSortPrice","event","sort_p","target","value","page","onSetCategory","category","filter","state","keyword","limit","prevProps","onGetList","onGetListCategory","filters","params","pageNumber","document","title","listProducts","total","listCategory","t","undefined","map","index","id","name","count","product","parseInt","handlePageChange","bind","mapStateToProps","products","list","categories","mapDispatchToProps","dispatch","onGetListKeyword","withConnect"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next'\nimport qs from \"query-string\";\n// @Actions\nimport ProductsActions from '../../redux/actions/products'\nimport CategoryActions from '../../redux/actions/categories'\n// @Functions\nimport getFilterParams from \"../../utils/getFilterParams\";\n// @Components\nimport ProductItem from \"../../containers/ProductItem\"\nimport Pagination from \"react-js-pagination\";\n\nclass SearchPage extends Component {\n  constructor(props){\n    super(props);\n    const {location} = props;\n    const filter = getFilterParams(location.search);\n    this.state = {\n      keyword: filter.keyword ===null ? \"\" : filter.keyword,\n      filter: {\n        limit: 12,\n        page: 0,\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const {location, onGetList, onGetListCategory} = this.props\n    if (prevProps.location.search !== location.search) {\n      const filters = getFilterParams(location.search);\n      const { filter } = this.state;\n      var params = {\n        ...filter,\n        ...filters\n      };\n      onGetList(params);\n      onGetListCategory(params);\n    }\n  }\n\n  handleUpdateFilter = (data) => {\n    const {location, history} = this.props;\n    const {pathname, search} = location;\n    let queryParams = getFilterParams(search);\n    queryParams = {\n      ...queryParams,\n      ...data,\n    };\n    history.push(`${pathname}?${qs.stringify(queryParams)}`);\n  };\n\n  // Sort price\n  handleChangeSortPrice = (event) =>{\n    this.handleUpdateFilter({ sort_p: event.target.value, page : 0 });\n  }\n\n  // Sort with categories\n  onSetCategory = (value) => {\n    this.handleUpdateFilter({ category: value, page: 0 });\n  }\n  // phân trang\n  handlePageChange(pageNumber) {\n    this.handleUpdateFilter({ page: pageNumber-1 });\n  }\n\n  UNSAFE_componentWillMount() {\n    const { onGetList, location, onGetListCategory } = this.props;\n    const { filter, keyword } = this.state;\n    document.title = `Kết quả tìm kiếm '${keyword}'`\n    const filters = getFilterParams(location.search);\n    var params = {\n      ...filter,\n      ...filters\n    };\n    onGetList(params);\n    onGetListCategory(params)\n  }\n\n  render() {\n    const { location, listProducts, total, listCategory, t } = this.props;\n    const filter = getFilterParams(location.search);\n    return (\n      <div className=\"single-product-area\">\n        <div className=\"container my-3\">\n          <div className=\"row\">\n            <div className=\"col-12 my-2\">\n              <a className=\"text-decoration-none directory rounded p-2\" href=\"/#/\">{t('header.home.menu')}</a>\n              <i className=\"fa fa-chevron-right px-2 w-25-px\"></i>\n            </div>\n            <div className=\"col-12\">\n              <h1 className=\"font-weight-bold\">{t(\"search.label\")}</h1>\n            </div>\n          </div>\n          {total > 0 && <div className=\"row\">\n            <div className=\"col-12\">\n              <h3 className=\"border-bottom pb-2\">{t('search.result.title')} '{filter.keyword}'</h3> \n            </div>\n            <div className=\"col-12\">\n              <button type=\"button\" \n              className={(filter.category === null || filter.category === undefined) ? \"rounded-pill shadow-sm bg-info text-dark my-2 mr-2 position-relative btn-padding\" : \"rounded-pill shadow-sm bg-active text-dark my-2 mr-2 position-relative btn-padding\"} \n              onClick={()=>this.onSetCategory(null)}>{t('common.all')}</button>\n              {listCategory && \n              listCategory.map((category, index) =>{\n              return(\n                <button type=\"button\" \n                className={filter.category === category.id.id ? \"rounded-pill shadow-sm bg-info text-dark mr-2 my-2 position-relative btn-padding\" : \"rounded-pill shadow-sm bg-active text-dark mr-2 my-2 position-relative btn-padding\"} \n                key={index} onClick={()=>this.onSetCategory(category.id.id)}>\n                  {category.id.name}\n                  <span className=\"product-count\">{category.count}</span>\n                </button>\n              )})}\n            </div>\n            <div className=\"col-12\">\n              <div className=\"row\">\n                <div className=\"col-6\">\n                <p>{t('shop.search.first')} {total} {t('shop.search.last')}</p>\n                </div>\n                <div className=\"col-6\">\n                <select value={filter.sort_p} className=\"form-select float-end w-fit-content\" onChange={this.handleChangeSortPrice}>\n                  <option key={-1} value=\"0\">{t('shop.sort.price')}</option>\n                  <option value=\"1\">{t('shop.sort.inc')}</option>\n                  <option value=\"-1\">{t('shop.sort.des')}</option>\n                </select>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-12\">\n              <div className=\"row\">\n                {listProducts && listProducts.map((product, index) => {\n                  return (\n                      <ProductItem product={product} key={index} />\n                    )\n                })}\n              </div>\n            </div>\n          </div>}\n          {total === 0 && <div className=\"row my-1\">\n            <div className=\"col-12\">\n              <div className=\"text-center my-5 py-5\">\n                <div className=\"h-120\">\n                  <img className=\"h-100\" src=\"https://deo.shopeemobile.com/shopee/shopee-pcmall-live-sg/assets/a60759ad1dabe909c46a817ecbf71878.png\" alt=\"404 not found\"></img>\n                </div>\n                <h3>{t('search.not-yet.h3')}</h3>\n              </div>\n            </div>\n          </div>}\n          {total > 0 && <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"product-pagination text-center\">\n              <nav className=\"float-end\">\n              <Pagination\n                activePage={filter.page ? parseInt(filter.page)+1 : 1}\n                itemsCountPerPage={4}\n                totalItemsCount={total ? total : 10}\n                pageRangeDisplayed={3}\n                linkClass=\"page-link\"\n                itemClass=\"page-item\"\n                prevPageText={t('shop.pagination.prev')}\n                nextPageText={t('shop.pagination.next')}\n                hideFirstLastPages={true}\n                onChange={this.handlePageChange.bind(this)}\n              />\n              </nav>\n              </div>\n            </div> \n          </div>}\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = (state) =>{\n  return {\n    listProducts: state.products.list,\n    listCategory: state.categories.search,\n    total: state.products.total,\n  }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    onGetList: (params) => {\n      dispatch(ProductsActions.onGetList(params))\n    },\n    onGetListCategory: (params) => {\n      dispatch(CategoryActions.onGetListKeyword(params))\n    },\n  }\n}\n\nconst withConnect = connect(mapStateToProps, mapDispatchToProps)\n\nexport default compose(\n  withConnect,\n  withTranslation()\n)(SearchPage);"]},"metadata":{},"sourceType":"module"}